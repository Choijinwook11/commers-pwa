(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[740],{308:(e,s,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/customers/new",function(){return o(4994)}])},4994:(e,s,o)=>{"use strict";o.r(s),o.d(s,{default:()=>c});var l=o(7876),a=o(4232),t=o(9099),r=o(8230),n=o.n(r);function c(){let e=(0,t.useRouter)(),[s,o]=(0,a.useState)({name:"",phone:"",birthDate:"",medicalHistory:"",consultation:"",feedback:"",summary:""}),[r,c]=(0,a.useState)(!1),d=e=>{let{name:s,value:l}=e.target;o(e=>({...e,[s]:l}))},m=async o=>{o.preventDefault(),c(!0),console.log("저장 시작 - 입력된 데이터:",s);try{localStorage.setItem("test-key","test-value");let o=localStorage.getItem("test-key");if(console.log("localStorage 테스트:",o),"test-value"!==o)throw Error("localStorage가 작동하지 않습니다");let l=localStorage.getItem("commers-customers");console.log("기존 데이터:",l);let a=l?JSON.parse(l):[];console.log("파싱된 고객 목록:",a);let t={id:Date.now().toString(),name:s.name,phone:s.phone,birthDate:s.birthDate,medicalHistory:s.medicalHistory,consultation:s.consultation,feedback:s.feedback,summary:s.summary,records:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("새 고객 객체:",t),a.push(t),console.log("추가된 고객 목록:",a);let r=JSON.stringify(a);console.log("저장할 데이터:",r),localStorage.setItem("commers-customers",r);let n=localStorage.getItem("commers-customers");if(console.log("저장 후 확인:",n),n)console.log("고객 저장 완료:",t),alert('고객 "'.concat(s.name,'"이 성공적으로 저장되었습니다!\n\n저장된 고객 수: ').concat(a.length,"명")),e.push("/customers");else throw Error("localStorage 저장 실패")}catch(e){console.error("고객 저장 실패:",e),alert("고객 저장에 실패했습니다: ".concat(e))}finally{c(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsx)("div",{className:"flex justify-between items-center py-4",children:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(n(),{href:"/",className:"text-gray-500 hover:text-gray-700",children:"← 뒤로"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"새 고객 추가"})]})})})}),(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,l.jsxs)("form",{onSubmit:m,className:"bg-white rounded-lg shadow-sm p-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"기본 정보"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"이름 *"}),(0,l.jsx)("input",{type:"text",id:"name",name:"name",required:!0,value:s.name,onChange:d,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"전화번호 *"}),(0,l.jsx)("input",{type:"tel",id:"phone",name:"phone",required:!0,value:s.phone,onChange:d,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"birthDate",className:"block text-sm font-medium text-gray-700",children:"생년월일"}),(0,l.jsx)("input",{type:"text",id:"birthDate",name:"birthDate",value:s.birthDate,onChange:d,placeholder:"예: 1985-03-15 또는 850315",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"의료 정보"})}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{htmlFor:"medicalHistory",className:"block text-sm font-medium text-gray-700",children:"의료 이력"}),(0,l.jsx)("textarea",{id:"medicalHistory",name:"medicalHistory",rows:4,value:s.medicalHistory,onChange:d,placeholder:"과거 질병, 수술 이력, 복용 중인 약물 등",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{htmlFor:"consultation",className:"block text-sm font-medium text-gray-700",children:"문진"}),(0,l.jsx)("textarea",{id:"consultation",name:"consultation",rows:4,value:s.consultation,onChange:d,placeholder:"현재 증상, 통증 부위, 생활 습관 등",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{htmlFor:"feedback",className:"block text-sm font-medium text-gray-700",children:"피드백"}),(0,l.jsx)("textarea",{id:"feedback",name:"feedback",rows:4,value:s.feedback,onChange:d,placeholder:"고객의 피드백이나 요청사항",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{htmlFor:"summary",className:"block text-sm font-medium text-gray-700",children:"요약"}),(0,l.jsx)("textarea",{id:"summary",name:"summary",rows:3,value:s.summary,onChange:d,placeholder:"고객 정보 요약",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4 mt-8",children:[(0,l.jsx)(n(),{href:"/customers",children:(0,l.jsx)("button",{type:"button",className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"취소"})}),(0,l.jsx)("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:r?"저장 중...":"저장"})]})]})})]})}},9099:(e,s,o)=>{e.exports=o(8253)}},e=>{var s=s=>e(e.s=s);e.O(0,[230,636,593,792],()=>s(308)),_N_E=e.O()}]);