(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{676:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/customers/[id]/edit",function(){return a(7932)}])},7932:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var r=a(7876),l=a(4232),t=a(9099),o=a(8230),n=a.n(o);function c(){let e=(0,t.useRouter)(),{id:s}=e.query,[a,o]=(0,l.useState)({name:"",phone:"",birthDate:"",medicalHistory:"",consultation:"",feedback:"",summary:""}),[c,d]=(0,l.useState)(!1),[m,i]=(0,l.useState)(null);(0,l.useEffect)(()=>{s&&u()},[s]);let u=()=>{try{let a=JSON.parse(localStorage.getItem("commers-customers")||"[]").find(e=>e.id===s);a?(i(a),o({name:a.name,phone:a.phone,birthDate:a.birthDate,medicalHistory:a.medicalHistory,consultation:a.consultation,feedback:a.feedback,summary:a.summary})):e.push("/customers")}catch(e){console.error("Failed to load customer data:",e)}},x=e=>{let{name:s,value:a}=e.target;o(e=>({...e,[s]:a}))},b=async r=>{r.preventDefault(),d(!0);try{let r=JSON.parse(localStorage.getItem("commers-customers")||"[]"),l=r.findIndex(e=>e.id===s);-1!==l?(r[l]={...r[l],...a,updatedAt:new Date().toISOString()},localStorage.setItem("commers-customers",JSON.stringify(r)),e.push("/customers/".concat(s))):alert("고객을 찾을 수 없습니다.")}catch(e){console.error("Failed to update customer:",e),alert("고객 수정에 실패했습니다.")}finally{d(!1)}};return m?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"flex justify-between items-center py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/customers/".concat(s),className:"text-gray-500 hover:text-gray-700",children:"← 뒤로"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"고객 정보 수정"})]})})})}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("form",{onSubmit:b,className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"기본 정보"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"이름 *"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",required:!0,value:a.name,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"전화번호 *"}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",required:!0,value:a.phone,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"birthDate",className:"block text-sm font-medium text-gray-700",children:"생년월일"}),(0,r.jsx)("input",{type:"text",id:"birthDate",name:"birthDate",value:a.birthDate,onChange:x,placeholder:"예: 1985-03-15 또는 850315",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"의료 정보"})}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"medicalHistory",className:"block text-sm font-medium text-gray-700",children:"의료 이력"}),(0,r.jsx)("textarea",{id:"medicalHistory",name:"medicalHistory",rows:4,value:a.medicalHistory,onChange:x,placeholder:"과거 질병, 수술 이력, 복용 중인 약물 등",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"consultation",className:"block text-sm font-medium text-gray-700",children:"문진"}),(0,r.jsx)("textarea",{id:"consultation",name:"consultation",rows:4,value:a.consultation,onChange:x,placeholder:"현재 증상, 통증 부위, 생활 습관 등",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"feedback",className:"block text-sm font-medium text-gray-700",children:"피드백"}),(0,r.jsx)("textarea",{id:"feedback",name:"feedback",rows:4,value:a.feedback,onChange:x,placeholder:"고객의 피드백이나 요청사항",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{htmlFor:"summary",className:"block text-sm font-medium text-gray-700",children:"요약"}),(0,r.jsx)("textarea",{id:"summary",name:"summary",rows:3,value:a.summary,onChange:x,placeholder:"고객 정보 요약",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 mt-8",children:[(0,r.jsx)(n(),{href:"/customers/".concat(s),children:(0,r.jsx)("button",{type:"button",className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"취소"})}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:c?"저장 중...":"저장"})]})]})})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"로딩 중..."})]})})}},9099:(e,s,a)=>{e.exports=a(8253)}},e=>{var s=s=>e(e.s=s);e.O(0,[230,636,593,792],()=>s(676)),_N_E=e.O()}]);