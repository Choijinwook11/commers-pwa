(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{3239:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(7876),l=t(4232),r=t(8230),d=t.n(r);function i(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(null),[i,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{n()},[]);let n=()=>{try{let e=JSON.parse(localStorage.getItem("daily-logs")||"[]").sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime());s(e)}catch(e){console.error("Failed to load logs:",e)}finally{c(!1)}},x=t=>{if(!confirm("정말로 이 날의 관리일지를 삭제하시겠습니까?"))return;let a=e.filter(e=>e.date!==t);localStorage.setItem("daily-logs",JSON.stringify(a)),s(a),r(null)},m=e=>0===e.length?0:(e.reduce((e,s)=>e+s.satisfaction,0)/e.length).toFixed(1);return i?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"로딩 중..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(d(),{href:"/",className:"text-gray-500 hover:text-gray-700",children:"← 뒤로"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"관리일지 히스토리"})]}),(0,a.jsx)(d(),{href:"/daily-log",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"오늘 관리일지"})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"날짜별 목록"}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("p",{children:"등록된 관리일지가 없습니다."}),(0,a.jsx)(d(),{href:"/daily-log",className:"text-blue-600 hover:underline mt-2 inline-block",children:"첫 번째 관리일지 작성하기"})]}):(0,a.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:e.map(e=>(0,a.jsxs)("button",{onClick:()=>r(e),className:"w-full text-left p-3 border rounded-lg transition-colors ".concat((null==t?void 0:t.date)===e.date?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"),children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:new Date(e.date).toLocaleDateString()}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["고객 ",e.customers.length,"명"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["평균 만족도: ",m(e.customers),"점"]})]},e.id))})]})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:t?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[new Date(t.date).toLocaleDateString()," 관리일지"]}),(0,a.jsx)("button",{onClick:()=>x(t.date),className:"text-red-600 hover:text-red-800 text-sm",children:"삭제"})]}),(0,a.jsx)("div",{className:"space-y-4 mb-6",children:t.customers.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:e.customerName}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"시간:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-900",children:e.time||"미입력"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"소요시간:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-900",children:e.duration||"미입력"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"시술 내용:"}),(0,a.jsx)("p",{className:"mt-1 text-gray-900 whitespace-pre-wrap",children:e.treatment||"미입력"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"특이사항:"}),(0,a.jsx)("p",{className:"mt-1 text-gray-900 whitespace-pre-wrap",children:e.notes||"미입력"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"만족도:"}),(0,a.jsxs)("span",{className:"ml-2 text-gray-900",children:[e.satisfaction,"점",e.satisfaction>=4&&" \uD83D\uDE0A",e.satisfaction<=2&&" \uD83D\uDE1E"]})]})]})]},s))}),t.notes&&(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"일일 노트"}),(0,a.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:t.notes})]}),(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"일일 통계"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.customers.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"총 고객 수"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:m(t.customers)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"평균 만족도"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:t.customers.filter(e=>e.satisfaction>=4).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"만족 고객"})]})]})]})]}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,a.jsx)("p",{children:"왼쪽에서 날짜를 선택하여 상세 내용을 확인하세요."})})})})]})})]})}},4208:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/daily-log-history",function(){return t(3239)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[230,636,593,792],()=>s(4208)),_N_E=e.O()}]);